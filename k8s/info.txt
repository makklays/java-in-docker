
# Собрать jar файл
mvn clean package -DskipTests

# Обновить/отправить jar файл в kubernetes
docker build -t javaindocker/java-app:1.1 .
docker push javaindocker/java-app:1.1

# Применить обновления
kubectl apply -f k8s/mysql-deployment.yaml
kubectl apply -f k8s/mysql-service.yaml

kubectl apply -f k8s/myapp-k8s-deployment.yaml
kubectl apply -f k8s/myapp-k8s-service.yaml

# Перезапустить под, чтобы он взял новые переменные окружения:
kubectl rollout restart deployment myapp

# Проверить что Pod-ы обновились
kubectl rollout status deployment/myapp
kubectl get pods

# Проверить статус пода и логи:
kubectl get pods
kubectl logs -f <имя_pod_с_myapp>

